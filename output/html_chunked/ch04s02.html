<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Types of servers</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link rel="home" href="index.html" title="Notification Server"><link rel="up" href="ch04.html" title="Chapter 4. Notification Server Architecture"><link rel="prev" href="ch04.html" title="Chapter 4. Notification Server Architecture"><link rel="next" href="ch05.html" title="Chapter 5. Notification Server Performance"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Types of servers</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><th width="60%" align="center">Chapter 4. Notification Server Architecture</th><td width="20%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp56512"></a>Types of servers</h2></div></div></div><p>
      In order to be able to scale horizontally and vertically with no limits
      all the server platform infrastructure had been splitted in several boxes
      one of them dedicated to a particular task and also independent of the
      rest so it can be scalled independently of the rest ones.
    </p><p>
        The names of each box follows this scheme:
        NS-&lt;type_of_client&gt;
    </p><p>
      </p><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="450"><tr><td align="center"><img src="resources/ns_servers.png" align="middle" width="450"></td></tr></table><p>
    </p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idp59456"></a>NS-UA-WS</h3></div></div></div><p>
          The NS_UA_WS server is the frontend for mobile devices.
          This server will attend the clients using HTTP protocols
          (HTTP GET and WebSockets)  
        </p><p>
          This server offers to channels:
          </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
              Retrieve a valid User Agent token used to identify each handset.
              This token will be delivered via HTTP GET method to
              the /token URL.
            </li><li class="listitem"><p>
                Maintain a Websocket connection with the clients.
                This WebSocket will be maintained open in order to deliver push
                messages through it.
              </p><p>
                This server will store on the MongoDB all registered nodes and
                applications. Also will receive from the Message Queue all the
                messages to be delivered to the connected handsets.
              </p></li></ul></div><p>
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idp63760"></a>NS-UA-UDP</h3></div></div></div><p>
          The NS_UA_UDP server is the responsible to intermediate between the
          central Notification Server infrastructure and each NS_WakeUp
          deployed in each OB.
        </p><p>
          As told before, this server will be connected to the message queue
          and for each received wake-up petition this server will retrieve from
          the MongoDB the NS_WakeUp server address and send a HTTP message to
          it querying to wake-up a handset.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idp65792"></a>NS-WakeUp</h3></div></div></div><p>
          The NS_WakeUp server is a proxy between the central NS servers and
          the client equipment (device). This service will receive petitions
          through a standard HTTP port and will send UDP datagrams or TCP packets
          (for pinging purposes) inside the OB private network to the private
          IP of the client equipment. This server must be placed inside the OB
          private network or in a zone that must see that private IPs.
        </p><p>
          The Wake-Up Proxy server is responsible to ping to the correct
          client inside each OB (using UDP datagrams). It must be placed inside
          the OB or in a zone that can see the devices inside that
          private network.
        </p><p>
          This server will receive the ping orders through a standard HTTP
          port which will be connected to InterNodo network to receive the
          data from the VDC inside Telefónica network.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idp148896"></a>NS-AS</h3></div></div></div><p>
          The NS_AS server is the frontend for application servers. This server
          will attend the third party servers through HTTPS POST petitions.
        </p><p>
          This server will expose a HTTPS POST in /notify method in order to
          receive messages from the third party application servers.
          The received messages will be stored on the MongoDB and will notify
          other servers through the Message Queue.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idp163344"></a>NS-Monitor</h3></div></div></div><p>
          The NS_Monitor is the responsible to deliver messages to the correct
          recipient. So this server will be monitoring all inbound messages,
          deliver them and verify if re-deliver is needed.
        </p><p>
          The monitor reads the /newMessage queue (which frontends from the
          NS_AS puts all the received messages), and finds in the database
          which nodes need to be notified, sending the message to the correct
          queue the node (user agent) is subscribed to.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idp165424"></a>Message Queue (RabbitMQ)</h3></div></div></div><p>
          A Message Queue cluster is used to act as a message dispatcher
          between all the other servers. RabbitMQ or ActiveMQ will be used.
        </p><p>
          This is a standard Message Queue which supports STOMP or AMQP protocol.
        </p><p>
          Because huge load, this server will be deployed in cluster mode.
        </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="idp167600"></a>NO-SQL Database (MongoDB)</h3></div></div></div><p>
          A MongoDB cluster is needed to use as persistent storage system.
          It is used to save the registered devices, registered apps and
          received messages.
        </p><p>
          This is a non relational database.
        </p><p>
          Because huge load, this server will be deployed in cluster mode.
        </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch04.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ch04.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 4. Notification Server Architecture </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 5. Notification Server Performance</td></tr></table></div></body></html>
