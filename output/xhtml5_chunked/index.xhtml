<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Notificaciones Push</title><link rel="stylesheet" type="text/css" href="docbook.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"/><link rel="next" href="ch01.xhtml" title="Capítulo 1. Introducción"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">Notificaciones Push</th></tr><tr><td style="width: 20%; text-align: left; "> </td><th style="width: 60%; text-align: center; "> </th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="ch01.xhtml">Siguiente</a></td></tr></table><hr/></div></header><div xml:lang="es" class="book" id="push_notification_server_pfc"><div class="titlepage"><div><div><h1 class="title">Notificaciones Push</h1></div><div><h2 class="subtitle">Para dispositivos móviles y la web</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Guillermo</span> <span class="surname">López Leal</span></h3></div></div><div><p class="copyright">Copyright © 2012 Guillermo López Leal, Telefónica Digital (PDI), All rights reserved.</p></div><div><div class="revhistory"><table style="border-style:solid; width:100%;"><tr><th style="text-align: left; vertical-align: top; " colspan="3"><strong>Historial de revisiones</strong></th></tr><tr><td style="text-align: left; ">Revisión 1.0</td><td style="text-align: left; ">Enero 2013</td><td style="text-align: left; "><span class="personname"><span class="firstname">Guillermo</span> <span class="surname">López Leal</span></span></td></tr><tr><td style="text-align: left; " colspan="3">Documento según presentado al tribunal del PFC</td></tr></table></div></div></div><hr/></div><div class="acknowledgements" id="idm560"><div class="titlepage"><div><div><h1 class="title">Agradecimientos</h1></div></div></div>
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Bernardo</span> <span class="surname">López</span></span> y <span class="personname"><span class="firstname">Carmen</span> <span class="surname">Leal</span></span>, por todo lo que han hecho siempre por mi. Gracias.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Leticia</span> <span class="surname">Núñez</span></span>, por aguantar mis peculiaridades.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Francisco</span> <span class="surname">Marzal</span></span>, por su inestimable ayuda durante la carrera y el proyecto.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Fernando</span> <span class="surname">Rodríguez Sela</span></span>, <span class="personname"><span class="firstname">Fernando</span> <span class="surname">Jiménez Moreno</span></span>, <span class="personname"><span class="firstname">José Antonio</span> <span class="surname">Olivera Ortega</span></span>, <span class="personname"><span class="firstname">Ignacio Eliseo</span> <span class="surname">Barandalla Torregrosa</span></span>, <span class="personname"><span class="firstname">Daniel</span> <span class="surname">Coloma</span></span>, <span class="personname"><span class="firstname">Miguel</span> <span class="surname">Schneider</span></span> y al resto de gente de Telefónica I+D, ya sea de la iniciativa Open Web Device u otras, por todo lo que me han enseñado durante el tiempo que pasé allí. Gracias a todos.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Manuel</span> <span class="surname">Touriño</span></span> y <span class="personname"><span class="firstname">Francisco</span> <span class="surname">Sánchez</span></span>, por la revisión a fondo de este proyecto, por estar cuando se les necesita y por ser grandes compañeros de carrera.
      </p></li><li class="listitem"><p>
        A mis amigos de toda la vida, y a los más recientes, por ser como son y pasar enormes tiempos de risa juntos.
      </p></li></ul></div>
</div><div class="toc"><div class="toc-title">Tabla de contenidos</div><ul><li><span class="chapter"><a href="ch01.xhtml">1. Introducción</a></span><ul><li><span class="section"><a href="ch01.xhtml#idp67520">Resumen</a></span></li><li><span class="section"><a href="ch01s02.xhtml">Objetivos</a></span></li><li><span class="section"><a href="ch01s03.xhtml">Descripción del servicio</a></span></li></ul></li><li><span class="chapter"><a href="ch02.xhtml">2. Estado del arte</a></span><ul><li><span class="section"><a href="ch02.xhtml#state_art_mobile_networks_main">Redes móviles: funcionamiento y problemas</a></span><ul><li><span class="section"><a href="ch02.xhtml#idp256224">Redes LAN públicas o privadas</a></span></li><li><span class="section"><a href="ch02.xhtml#idp274672">Estados del dominio de circuitos</a></span></li></ul></li><li><span class="section"><a href="ch02s02.xhtml">Operadores</a></span><ul><li><span class="section"><a href="ch02s02.xhtml#state_art_operators_wappush">WAP Push</a></span></li></ul></li><li><span class="section"><a href="ch02s03.xhtml">Internet</a></span><ul><li><span class="section"><a href="ch02s03.xhtml#state_art_Internet_gcm">GCM: Google Could Messaging</a></span></li><li><span class="section"><a href="ch02s03.xhtml#state_art_Internet_apns">APNS: Apple Push Notification Service</a></span></li><li><span class="section"><a href="ch02s03.xhtml#state_art_Internet_thialfi">Thialfi: el futuro de Google</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch03.xhtml">3. Application Program Interface, API</a></span><ul><li><span class="section"><a href="ch03.xhtml#api_external">Externas</a></span><ul><li><span class="section"><a href="ch03.xhtml#api_external_wa_ua">Entre la WA y UA</a></span></li><li><span class="section"><a href="ch03.xhtml#api_external_wa_as">Entre el WA y AS</a></span></li><li><span class="section"><a href="ch03.xhtml#api_external_as_ns">Entre el AS y NS</a></span></li></ul></li><li><span class="section"><a href="ch03s02.xhtml">Interna: Entre el UA y el NS</a></span><ul><li><span class="section"><a href="ch03s02.xhtml#api_internal_ua_ns_http">Interfaz HTTP</a></span></li><li><span class="section"><a href="ch03s02.xhtml#api_internal_ua_ns_websocket">Interfaz WebSocket</a></span></li><li><span class="section"><a href="ch03s02.xhtml#api_internal_ua_udp">Interfaz UDP</a></span></li><li><span class="section"><a href="ch03s02.xhtml#idp924704">Flujo completo</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch04.xhtml">4. Arquitectura interna</a></span><ul><li><span class="section"><a href="ch04.xhtml#idp294768">Tipos de servidor</a></span><ul><li><span class="section"><a href="ch04.xhtml#idp296896">NS-UA-WS</a></span></li><li><span class="section"><a href="ch04.xhtml#idp92144">NS-UA-UDP</a></span></li><li><span class="section"><a href="ch04.xhtml#idp195040">NS_Proxy_UDP</a></span></li><li><span class="section"><a href="ch04.xhtml#idp196704">NS-AS</a></span></li><li><span class="section"><a href="ch04.xhtml#idp183728">NS-MSG-Monitor</a></span></li><li><span class="section"><a href="ch04.xhtml#idp185808">Colas de mensajes, o Message Queue</a></span></li><li><span class="section"><a href="ch04.xhtml#idp328352">Base de datos, NO-SQL (MongoDB)</a></span></li></ul></li><li><span class="section"><a href="ch04s02.xhtml">Flujos de trabajo</a></span><ul><li><span class="section"><a href="ch04s02.xhtml#idp331200">Registros de dispositivos/aplicaciones</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp338224">Aceptación de notificación</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp347088">Envío de notificación al dispositivo: WebSocket</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp538736">Envío de notificación al dispositivo: UDP</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp545536">Confirmación de recepción</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch05.xhtml">5. Tecnologías</a></span><ul><li><span class="section"><a href="ch05.xhtml#idp561088">Node.js</a></span><ul><li><span class="section"><a href="ch05.xhtml#idp580096">Para qué se usa</a></span></li><li><span class="section"><a href="ch05.xhtml#idp582496">Por qué se ha elegido</a></span></li></ul></li><li><span class="section"><a href="ch05s02.xhtml">RabbitMQ</a></span><ul><li><span class="section"><a href="ch05s02.xhtml#idp124704">Para qué se usa</a></span></li><li><span class="section"><a href="ch05s02.xhtml#idp128384">Por qué se ha elegido</a></span></li></ul></li><li><span class="section"><a href="ch05s03.xhtml">MongoDB</a></span><ul><li><span class="section"><a href="ch05s03.xhtml#idp485872">Para qué se usa</a></span></li><li><span class="section"><a href="ch05s03.xhtml#idp487488">Por qué se ha elegido</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch06.xhtml">6. Seguridad</a></span><ul><li><span class="section"><a href="ch06.xhtml#idp500928">Tokens de dispositivo</a></span></li><li><span class="section"><a href="ch06s02.xhtml">Registro con clave pública-privada</a></span></li><li><span class="section"><a href="ch06s03.xhtml">Notificaciones firmadas</a></span></li><li><span class="section"><a href="ch06s04.xhtml">Verificación de notificaciones</a></span></li><li><span class="section"><a href="ch06s05.xhtml">Ataque DDoS: flooding y replay</a></span></li><li><span class="section"><a href="ch06s06.xhtml">Comunicación cifrada vía SSL</a></span></li><li><span class="section"><a href="ch06s07.xhtml">UDP para notificaciones</a></span></li><li><span class="section"><a href="ch06s08.xhtml">Entrega de notificaciones a las aplicaciones</a></span></li></ul></li><li><span class="chapter"><a href="ch07.xhtml">7. Lecciones aprendidas</a></span><ul><li><span class="section"><a href="ch07.xhtml#idp755632">SQL contra NoSQL</a></span></li><li><span class="section"><a href="ch07s02.xhtml">Investigar nuevas tecnologías</a></span></li><li><span class="section"><a href="ch07s03.xhtml">Tener tests unitarios y funcionales</a></span></li><li><span class="section"><a href="ch07s04.xhtml">Priorización y enfoque en tareas</a></span></li><li><span class="section"><a href="ch07s05.xhtml">Trabajar en abierto</a></span></li><li><span class="section"><a href="ch07s06.xhtml">La importancia del hardware</a></span></li></ul></li><li><span class="chapter"><a href="ch08.xhtml">8. Futuro: v2 y siguientes</a></span><ul><li><span class="section"><a href="ch08.xhtml#idp965152">Sobreescribir notificaciones</a></span></li><li><span class="section"><a href="ch08s02.xhtml">Recepción segura de token de usuario</a></span></li><li><span class="section"><a href="ch08s03.xhtml">Cambio en el tamaño máximo</a></span></li><li><span class="section"><a href="ch08s04.xhtml">Poder enviar números de versión</a></span></li><li><span class="section"><a href="ch08s05.xhtml">Implementar soporte para IPv6</a></span></li><li><span class="section"><a href="ch08s06.xhtml">Implementar prioridades</a></span></li><li><span class="section"><a href="ch08s07.xhtml">PINGs de backup</a></span></li><li><span class="section"><a href="ch08s08.xhtml">Soporte WAP push</a></span></li><li><span class="section"><a href="ch08s09.xhtml">Control de abuso</a></span></li><li><span class="section"><a href="ch08s10.xhtml">Soporte a diferentes servidores de notificaciones</a></span></li><li><span class="section"><a href="ch08s11.xhtml">Control de presencia</a></span></li><li><span class="section"><a href="ch08s12.xhtml">Control de entrega de notificaciones</a></span></li></ul></li><li><span class="chapter"><a href="ch09.xhtml">9. Conclusiones</a></span></li><li><span class="glossary"><a href="go01.xhtml">Glosario de términos</a></span></li><li><span class="bibliography"><a href="bi01.xhtml">Bibliografía</a></span></li></ul></div><div class="list-of-figures"><div class="toc-title">Lista de figuras</div><ul><li>2.1. <a href="ch02.xhtml#idp286848">Esquema de estados radio</a></li><li>2.2. <a href="ch02s02.xhtml#idp179456">Funcionamiento WAP Push</a></li><li>2.3. <a href="ch02s03.xhtml#idp188608">Funcionamiento de GCM</a></li><li>2.4. <a href="ch02s03.xhtml#idp408400">Líneas de código para implementar Thialfi</a></li><li>3.1. <a href="ch03.xhtml#idp434352">Instancias y comunicaciones</a></li><li>3.2. <a href="ch03.xhtml#idp602976">Interfaz <code class="code">PushManager</code></a></li><li>3.3. <a href="ch03.xhtml#idp607024">Función <code class="code">requestRemotePermission</code></a></li><li>3.4. <a href="ch03.xhtml#idp670736">Notificación enviada</a></li><li>4.1. <a href="ch04.xhtml#idp292304">Esquema general de la arquitectura</a></li><li>4.2. <a href="ch04s02.xhtml#idp332336">Flujo de registro</a></li><li>4.3. <a href="ch04s02.xhtml#idp338928">Flujo de notificación</a></li><li>6.1. <a href="ch06.xhtml#idp511712">Generación de token</a></li><li>6.2. <a href="ch06.xhtml#idp523856">Verificación de tokens</a></li><li>6.3. <a href="ch06s02.xhtml#idp529600">Registro de WA en el UA</a></li><li>6.4. <a href="ch06s03.xhtml#idp537696">Verificación de firma (en <code class="filename">src/common/crypto.js</code>)</a></li><li>6.5. <a href="ch06s03.xhtml#idp130304">Comprobación de firma (en <code class="filename">src/ns_as/ns_as_server.js</code>)</a></li><li>6.6. <a href="ch06s04.xhtml#idp161552">Notificación normalizada</a></li></ul></div><div class="list-of-examples"><div class="toc-title">Lista de ejemplos</div><ul><li>3.1. <a href="ch03.xhtml#idp631280">Pedir permiso remoto y recibir URL</a></li><li>3.2. <a href="ch03.xhtml#idp649920">Pedir revocación de permiso (revocar URL)</a></li><li>8.1. <a href="ch08.xhtml#idp966480">Notificación sobre el desarrollo de un partido de fútbol</a></li><li>8.2. <a href="ch08s04.xhtml#idp981808">Uso de números de versión en aplicación del banco</a></li><li>8.3. <a href="ch08s06.xhtml#idp996736">Información sobre lugares cercanos y ofertas</a></li><li>8.4. <a href="ch08s12.xhtml#idp1021728">Enviar mensajes sólo si los anteriores han llegado</a></li></ul></div></div><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "> </td><td style="width: 20%; text-align: center; "> </td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="ch01.xhtml">Siguiente</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; "> </td><td style="width: 20%; text-align: center; "> </td><td style="width: 40%; text-align: right; vertical-align: top; "> Capítulo 1. Introducción</td></tr></table></div></footer></body></html>
