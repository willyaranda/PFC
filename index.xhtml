<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Notificaciones Push</title><link rel="stylesheet" type="text/css" href="docbook.css"/><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"/><link rel="next" href="pr01.xhtml" title="Contexto del proyecto"/></head><body><header><div class="navheader"><table style="width: 100%; "><tr><th style="text-align: center; " colspan="3">Notificaciones Push</th></tr><tr><td style="width: 20%; text-align: left; "> </td><th style="width: 60%; text-align: center; "> </th><td style="width: 20%; text-align: right; "> <a accesskey="n" href="pr01.xhtml">Siguiente</a></td></tr></table><hr/></div></header><div xml:lang="es" class="book" id="push_notification_server_pfc"><div class="titlepage"><div><div><h1 class="title">Notificaciones Push</h1></div><div><h2 class="subtitle">Dispositivos móviles y web</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Guillermo</span> <span class="surname">López Leal</span></h3></div></div><div><p class="copyright">Copyright © 2012 Guillermo López Leal, Telefónica Digital (PDI), All rights reserved.</p></div><div><div class="revhistory"><table style="border-style:solid; width:100%;"><tr><th style="text-align: left; vertical-align: top; " colspan="3"><strong>Historial de revisiones</strong></th></tr><tr><td style="text-align: left; ">Revisión 1.0</td><td style="text-align: left; ">Enero 2013</td><td style="text-align: left; "><span class="personname"><span class="firstname">Guillermo</span> <span class="surname">López Leal</span></span></td></tr><tr><td style="text-align: left; " colspan="3">Documento según presentado al tribunal del PFC</td></tr></table></div></div></div><hr/></div><div xml:lang="es" class="acknowledgements" id="idm288"><div class="titlepage"><div><div><h1 class="title">Agradecimientos</h1></div></div></div>
  <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Bernardo</span> <span class="surname">López</span></span> y <span class="personname"><span class="firstname">Carmen</span> <span class="surname">Leal</span></span>, por todo lo que han hecho siempre por mi. Gracias.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Leticia</span> <span class="surname">Núñez</span></span>, por aguantar mis peculiaridades.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Francisco</span> <span class="surname">Marzal</span></span>, por su inestimable ayuda durante la carrera y el proyecto.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Fernando</span> <span class="surname">Rodríguez Sela</span></span>, <span class="personname"><span class="firstname">Fernando</span> <span class="surname">Jiménez Moreno</span></span>, <span class="personname"><span class="firstname">José Antonio</span> <span class="surname">Olivera Ortega</span></span>, <span class="personname"><span class="firstname">Ignacio Eliseo</span> <span class="surname">Barandalla Torregrosa</span></span>, <span class="personname"><span class="firstname">Daniel</span> <span class="surname">Coloma</span></span>, <span class="personname"><span class="firstname">Miguel</span> <span class="surname">Schneider</span></span> y al resto de gente de Telefónica I+D, ya sea de la iniciativa Open Web Device u otras, por todo lo que me han enseñado durante todo este tiempo. Gracias a todos.
      </p></li><li class="listitem"><p>
        A <span class="personname"><span class="firstname">Manuel</span> <span class="surname">Touriño</span></span> y <span class="personname"><span class="firstname">Francisco</span> <span class="surname">Sánchez</span></span>, por la revisión a fondo de este proyecto, por estar cuando se les necesita y por ser grandes compañeros de carrera.
      </p></li><li class="listitem"><p>
        A todos mis compañeros de Mozilla Hispano, por todo lo que me han enseñado estos últimos años, y por todo lo que hemos logrado juntos.
      </p></li><li class="listitem"><p>
        A mis amigos de toda la vida, y a los más recientes, por ser como son y pasar enormes tiempos de risa juntos.
      </p></li></ul></div>
</div><div class="toc"><div class="toc-title">Tabla de contenidos</div><ul><li><span class="preface"><a href="pr01.xhtml">Contexto del proyecto</a></span></li><li><span class="chapter"><a href="ch01.xhtml">1. Introducción</a></span><ul><li><span class="section"><a href="ch01.xhtml#idp85744">Resumen</a></span></li><li><span class="section"><a href="ch01s02.xhtml">Objetivos</a></span></li><li><span class="section"><a href="ch01s03.xhtml">Descripción del servicio</a></span></li></ul></li><li><span class="chapter"><a href="ch02.xhtml">2. Estado del arte</a></span><ul><li><span class="section"><a href="ch02.xhtml#state_art_mobile_networks_main">Redes móviles: funcionamiento y problemas</a></span><ul><li><span class="section"><a href="ch02.xhtml#idp134592">Redes LAN públicas o privadas</a></span></li><li><span class="section"><a href="ch02.xhtml#idp326640">Estados del dominio de circuitos</a></span></li></ul></li><li><span class="section"><a href="ch02s02.xhtml">Operadores</a></span><ul><li><span class="section"><a href="ch02s02.xhtml#state_art_operators_wappush">WAP Push</a></span></li></ul></li><li><span class="section"><a href="ch02s03.xhtml">Internet</a></span><ul><li><span class="section"><a href="ch02s03.xhtml#state_art_Internet_gcm">GCM: Google Could Messaging</a></span></li><li><span class="section"><a href="ch02s03.xhtml#state_art_Internet_apns">APNS: Apple Push Notification Service</a></span></li><li><span class="section"><a href="ch02s03.xhtml#state_art_Internet_thialfi">Thialfi: el futuro de Google</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch03.xhtml">3. API</a></span><ul><li><span class="section"><a href="ch03.xhtml#api_external">Externas</a></span><ul><li><span class="section"><a href="ch03.xhtml#api_external_wa_ua">Entre la aplicación web y el agente de usuario</a></span></li><li><span class="section"><a href="ch03.xhtml#api_external_wa_as">Entre la aplicación web y el servidor de aplicaciones</a></span></li><li><span class="section"><a href="ch03.xhtml#api_external_as_ns">Entre el servidor de aplicación y servidor de notificaciones</a></span></li></ul></li><li><span class="section"><a href="ch03s02.xhtml">Interna: Entre el UA y el NS</a></span><ul><li><span class="section"><a href="ch03s02.xhtml#api_internal_ua_ns_http">Interfaz HTTP</a></span></li><li><span class="section"><a href="ch03s02.xhtml#api_internal_ua_ns_websocket">Interfaz WebSocket</a></span></li><li><span class="section"><a href="ch03s02.xhtml#api_internal_ua_udp">Interfaz UDP</a></span></li><li><span class="section"><a href="ch03s02.xhtml#idp1020336">Flujo completo</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch04.xhtml">4. Arquitectura interna</a></span><ul><li><span class="section"><a href="ch04.xhtml#idp839488">Tipos de servidor</a></span><ul><li><span class="section"><a href="ch04.xhtml#idp842000">NS-UA-WS</a></span></li><li><span class="section"><a href="ch04.xhtml#idp852464">NS-UA-UDP</a></span></li><li><span class="section"><a href="ch04.xhtml#idp855936">NS_Proxy_UDP</a></span></li><li><span class="section"><a href="ch04.xhtml#idp144656">NS-AS</a></span></li><li><span class="section"><a href="ch04.xhtml#idp154448">NS-MSG-Monitor</a></span></li><li><span class="section"><a href="ch04.xhtml#idp156528">Colas de mensajes, o Message Queue</a></span></li><li><span class="section"><a href="ch04.xhtml#idp167280">Base de datos, NO-SQL (MongoDB)</a></span></li></ul></li><li><span class="section"><a href="ch04s02.xhtml">Flujos de trabajo</a></span><ul><li><span class="section"><a href="ch04s02.xhtml#idp170560">Registros de dispositivos/aplicaciones</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp177936">Aceptación de notificación</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp186800">Envío de notificación al dispositivo: WebSocket</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp193696">Envío de notificación al dispositivo: UDP</a></span></li><li><span class="section"><a href="ch04s02.xhtml#idp303680">Confirmación de recepción</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch05.xhtml">5. Tecnologías</a></span><ul><li><span class="section"><a href="ch05.xhtml#idp211232">Node.js</a></span><ul><li><span class="section"><a href="ch05.xhtml#idp230256">Uso en el proyecto</a></span></li><li><span class="section"><a href="ch05.xhtml#idp429552">Argumentos para su elección</a></span></li></ul></li><li><span class="section"><a href="ch05s02.xhtml">RabbitMQ</a></span><ul><li><span class="section"><a href="ch05s02.xhtml#idp618080">Cometido principal</a></span></li><li><span class="section"><a href="ch05s02.xhtml#idp621744">Comparativa frente a otras soluciones</a></span></li></ul></li><li><span class="section"><a href="ch05s03.xhtml">MongoDB</a></span><ul><li><span class="section"><a href="ch05s03.xhtml#idp649008">Uso principal</a></span></li><li><span class="section"><a href="ch05s03.xhtml#idp650608">Elección</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="ch06.xhtml">6. Seguridad</a></span><ul><li><span class="section"><a href="ch06.xhtml#idp126096">Tokens de dispositivo</a></span></li><li><span class="section"><a href="ch06s02.xhtml">Registro con clave pública-privada</a></span></li><li><span class="section"><a href="ch06s03.xhtml">Notificaciones firmadas</a></span></li><li><span class="section"><a href="ch06s04.xhtml">Verificación de notificaciones</a></span></li><li><span class="section"><a href="ch06s05.xhtml">Ataque DDoS: flooding y replay</a></span></li><li><span class="section"><a href="ch06s06.xhtml">Comunicación cifrada vía SSL</a></span></li><li><span class="section"><a href="ch06s07.xhtml">UDP para notificaciones</a></span></li><li><span class="section"><a href="ch06s08.xhtml">Entrega de notificaciones a las aplicaciones</a></span></li></ul></li><li><span class="chapter"><a href="ch07.xhtml">7. Conocimientos adquiridos</a></span><ul><li><span class="section"><a href="ch07.xhtml#idp395968">SQL contra NoSQL</a></span></li><li><span class="section"><a href="ch07s02.xhtml">Investigar nuevas tecnologías</a></span></li><li><span class="section"><a href="ch07s03.xhtml">Tener tests unitarios y funcionales</a></span></li><li><span class="section"><a href="ch07s04.xhtml">Priorización y enfoque en tareas</a></span></li><li><span class="section"><a href="ch07s05.xhtml">Trabajar en abierto</a></span></li><li><span class="section"><a href="ch07s06.xhtml">La importancia del hardware</a></span></li></ul></li><li><span class="chapter"><a href="ch08.xhtml">8. Futuras líneas de investigación y desarrollo</a></span><ul><li><span class="section"><a href="ch08.xhtml#idp67216">Sobreescribir notificaciones</a></span></li><li><span class="section"><a href="ch08s02.xhtml">Recepción segura de token de usuario</a></span></li><li><span class="section"><a href="ch08s03.xhtml">Cambio en el tamaño máximo</a></span></li><li><span class="section"><a href="ch08s04.xhtml">Poder enviar números de versión</a></span></li><li><span class="section"><a href="ch08s05.xhtml">Implementar soporte para IPv6</a></span></li><li><span class="section"><a href="ch08s06.xhtml">Implementar prioridades</a></span></li><li><span class="section"><a href="ch08s07.xhtml">PINGs de backup</a></span></li><li><span class="section"><a href="ch08s08.xhtml">Soporte WAP push</a></span></li><li><span class="section"><a href="ch08s09.xhtml">Control de abuso</a></span></li><li><span class="section"><a href="ch08s10.xhtml">Soporte a diferentes servidores de notificaciones</a></span></li><li><span class="section"><a href="ch08s11.xhtml">Control de presencia</a></span></li><li><span class="section"><a href="ch08s12.xhtml">Control de entrega de notificaciones</a></span></li></ul></li><li><span class="chapter"><a href="ch09.xhtml">9. Conclusiones</a></span></li><li><span class="glossary"><a href="go01.xhtml">Glosario de términos</a></span></li><li><span class="bibliography"><a href="bi01.xhtml">Bibliografía</a></span></li></ul></div><div class="list-of-figures"><div class="toc-title">Lista de figuras</div><ul><li>1. <a href="pr01.xhtml#idp50624">Logo de FirefoxOS</a></li><li>2. <a href="pr01.xhtml#idp57120">FirefoxOS, pantalla de inicio</a></li><li>3. <a href="pr01.xhtml#idp61376">Dispositivos de desarrollo de FirefoxOS</a></li><li>2.1. <a href="ch02.xhtml#idp340672">Esquema de estados radio</a></li><li>2.2. <a href="ch02.xhtml#idp346192">Aplicación con demasiado tráfico de control, 1</a></li><li>2.3. <a href="ch02.xhtml#idp350832">Aplicación con demasiado tráfico de control, 2</a></li><li>2.4. <a href="ch02.xhtml#idp233248">Aplicación con poco tráfico de control</a></li><li>2.5. <a href="ch02s02.xhtml#idp250976">Funcionamiento WAP Push</a></li><li>2.6. <a href="ch02s03.xhtml#idp275808">GCM logo</a></li><li>2.7. <a href="ch02s03.xhtml#idp26656">Funcionamiento de GCM</a></li><li>2.8. <a href="ch02s03.xhtml#idp518416">Líneas de código para implementar Thialfi</a></li><li>3.1. <a href="ch03.xhtml#idp103840">Instancias y comunicaciones</a></li><li>3.2. <a href="ch03.xhtml#idp675040">Interfaz <code class="code">PushManager</code></a></li><li>3.3. <a href="ch03.xhtml#idp679088">Función <code class="code">requestRemotePermission</code></a></li><li>3.4. <a href="ch03.xhtml#idp717392">Función <code class="code">revokeRemotePermission</code></a></li><li>3.5. <a href="ch03.xhtml#idp745664">Notificación enviada</a></li><li>4.1. <a href="ch04.xhtml#idp837216">Esquema general de la arquitectura</a></li><li>4.2. <a href="ch04s02.xhtml#idp171792">Flujo de registro</a></li><li>4.3. <a href="ch04s02.xhtml#idp178640">Flujo de notificación</a></li><li>6.1. <a href="ch06.xhtml#idp538896">Generación de token</a></li><li>6.2. <a href="ch06.xhtml#idp551008">Verificación de tokens</a></li><li>6.3. <a href="ch06s02.xhtml#idp556720">Registro de WA en el UA</a></li><li>6.4. <a href="ch06s03.xhtml#idp564800">Verificación de firma (en <code class="filename">src/common/crypto.js</code>)</a></li><li>6.5. <a href="ch06s03.xhtml#idp566960">Comprobación de firma (en <code class="filename">src/ns_as/ns_as_server.js</code>)</a></li><li>6.6. <a href="ch06s04.xhtml#idp585952">Notificación normalizada</a></li></ul></div><div class="list-of-examples"><div class="toc-title">Lista de ejemplos</div><ul><li>3.1. <a href="ch03.xhtml#idp703424">Pedir permiso remoto y recibir URL</a></li><li>3.2. <a href="ch03.xhtml#idp723680">Pedir revocación de permiso (revocar URL)</a></li><li>8.1. <a href="ch08.xhtml#idp68544">Notificación sobre el desarrollo de un partido de fútbol</a></li><li>8.2. <a href="ch08s04.xhtml#idp1054672">Uso de números de versión en aplicación del banco</a></li><li>8.3. <a href="ch08s06.xhtml#idp1069552">Información sobre lugares cercanos y ofertas</a></li><li>8.4. <a href="ch08s12.xhtml#idp1094512">Enviar mensajes sólo si los anteriores han llegado</a></li></ul></div></div><footer><div class="navfooter"><hr/><table style="width: 100%; "><tr><td style="width: 40%; text-align: left; "> </td><td style="width: 20%; text-align: center; "> </td><td style="width: 40%; text-align: right; "> <a accesskey="n" href="pr01.xhtml">Siguiente</a></td></tr><tr><td style="width: 40%; text-align: left; vertical-align: top; "> </td><td style="width: 20%; text-align: center; "> </td><td style="width: 40%; text-align: right; vertical-align: top; "> Contexto del proyecto</td></tr></table></div></footer></body></html>
